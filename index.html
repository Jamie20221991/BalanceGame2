<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>🎈 Balance Game 2 - Mobile Edition</title>
    <meta name="description" content="The ultimate mobile balloon balance puzzle! Sleek, fast, and addictive gameplay.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="style.css">
    <!-- Modern fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- PWA support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>

<body>
    <!-- Mobile Game Header -->
    <div id="game-header">
        <div class="header-left">
            <div class="level-badge">Level <span id="current-level">1</span></div>
            <div class="score-display">
                <span class="coin-icon">🪙</span>
                <span id="coins">0</span>
            </div>
        </div>
        <div class="header-center">
            <h1>🎈 Balance</h1>
        </div>
        <div class="header-right">
            <button id="back-btn" class="icon-btn">⬅️</button>
            <button id="settings-btn" class="icon-btn">⚙️</button>
            <button id="theme-toggle" class="icon-btn">🌙</button>
        </div>
    </div>

    <!-- Progress Bar -->
    <div id="progress-container">
        <div class="progress-label">Progress</div>
        <div class="progress-bar">
            <div id="progress-fill"></div>
        </div>
        <div class="moves-counter">Moves: <span id="moves-count">0</span></div>
    </div>

    <!-- Difficulty Selection - Modern Cards -->
    <div id="difficulty-selection" class="game-screen">
        <h2>Choose Your Challenge</h2>
        <div class="difficulty-cards">
            <div class="difficulty-card" data-difficulty="easy">
                <div class="card-icon">🟢</div>
                <div class="card-title">Easy</div>
                <div class="card-subtitle">6 Balloons</div>
                <div class="card-reward">+10 🪙</div>
            </div>
            <div class="difficulty-card" data-difficulty="medium">
                <div class="card-icon">🟡</div>
                <div class="card-title">Medium</div>
                <div class="card-subtitle">8 Balloons</div>
                <div class="card-reward">+25 🪙</div>
            </div>
            <div class="difficulty-card" data-difficulty="hard">
                <div class="card-icon">🔴</div>
                <div class="card-title">Hard</div>
                <div class="card-subtitle">12 Balloons - Unknown Weight</div>
                <div class="card-reward">+75 🪙</div>
            </div>
            <div class="difficulty-card" data-difficulty="expert">
                <div class="card-icon">💀</div>
                <div class="card-title">Expert</div>
                <div class="card-subtitle">15 Balloons</div>
                <div class="card-reward">+100 🪙</div>
            </div>
        </div>
    </div>

    <!-- Main Game Screen -->
    <div id="game-play" class="game-screen hidden">
        <!-- Side-by-Side Game Layout -->
        <div class="game-layout">
            <!-- Left Panel - Weighing History -->
            <div class="left-panel">
                <div class="weighing-history">
                    <h3>📊 Weighing History</h3>
                    <div id="weighing-list">
                        <div class="weighing-hint">
                            <p>🎯 Start weighing balloons to see results here!</p>
                            <p>💡 Use this history to track your progress and find clues.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Strategy Tips -->
                <div class="strategy-tips">
                    <h4>💡 Strategy Tips:</h4>
                    <div class="tip-list">
                        <div class="tip">🔍 Divide balloons into groups</div>
                        <div class="tip">⚖️ Compare equal-sized groups first</div>
                        <div class="tip">🎯 Use process of elimination</div>
                        <div class="tip">📝 Track your weighing results</div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Game Area -->
            <div class="right-panel">
                <!-- Game Instructions -->
                <div class="game-instructions">
                    <p>🎈 Click a balloon, then click a drop zone to place it!</p>
                    <p>🔄 Click balloons on the scale to move them back</p>
                    <p>🎯 Double-click a balloon to select for guessing, then click Guess</p>
                </div>

                <!-- Scale Area -->
                <div id="scale-area">
                    <div id="scale-container">
                        <div id="left-drop-zone" class="drop-zone">
                            <div class="drop-hint">Drop here</div>
                        </div>
                        <div id="scale-pivot">⚖️</div>
                        <div id="right-drop-zone" class="drop-zone">
                            <div class="drop-hint">Drop here</div>
                        </div>
                    </div>
                    <div id="scale-beam"></div>
                </div>

                <!-- Balloons Container -->
                <div id="balloons-container"></div>

                <!-- Game Controls - Mobile Optimized -->
                <div class="game-controls">
                    <button id="hint-btn" class="control-btn hint-btn">
                        <span class="btn-icon">💡</span>
                        <span class="btn-text">Hint</span>
                    </button>
                    <button id="weigh-btn" class="control-btn weigh-btn">
                        <span class="btn-icon">⚖️</span>
                        <span class="btn-text">Weigh</span>
                    </button>
                    <button id="guess-btn" class="control-btn guess-btn">
                        <span class="btn-icon">🎯</span>
                        <span class="btn-text">Guess</span>
                    </button>
                    <button id="reset-btn" class="control-btn reset-btn">
                        <span class="btn-icon">🔄</span>
                        <span class="btn-text">Reset</span>
                    </button>
                </div>

                <!-- Message Display -->
                <div id="message">Select balloons and use the scale to find the odd one!</div>
            </div>
        </div>
    </div>

    <!-- Victory Screen -->
    <div id="victory-screen" class="game-screen hidden">
        <div class="victory-content">
            <div class="victory-icon">🎉</div>
            <h2>Amazing!</h2>
            <div class="victory-stats">
                <div class="stat-item">
                    <div class="stat-value" id="final-score">0</div>
                    <div class="stat-label">Score</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="moves-taken">0</div>
                    <div class="stat-label">Moves</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="time-taken">0:00</div>
                    <div class="stat-label">Time</div>
                </div>
            </div>
            <div class="victory-buttons">
                <button id="next-level-btn" class="victory-btn primary">Next Level</button>
                <button id="play-again-btn" class="victory-btn secondary">Play Again</button>
                <button id="main-menu-btn" class="victory-btn secondary">Home</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>⚙️ Settings</h3>
                <button id="close-settings" class="close-btn">✕</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <div class="setting-item">
                        <span>🌙 Dark Theme</span>
                        <label class="toggle">
                            <input type="checkbox" id="dark-theme-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span>� Sound Effects</span>
                        <label class="toggle">
                            <input type="checkbox" id="sound-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span>📳 Vibration</span>
                        <label class="toggle">
                            <input type="checkbox" id="vibration-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <button id="reset-game-btn" class="danger-btn">Reset All Progress</button>
            </div>
        </div>
    </div>

    <!-- Particle Canvas -->
    <canvas id="particles-canvas"></canvas>

    <script>
        // GitHub Pages debugging
        console.log('GitHub Pages Debug Info:');
        console.log('Location:', window.location.href);
        console.log('Protocol:', window.location.protocol);
        console.log('LocalStorage available:', typeof localStorage !== 'undefined');
        console.log('DOM ready state:', document.readyState);
        
        // Fallback error handling
        window.addEventListener('error', function(e) {
            console.error('Page Error:', e.error, e.filename, e.lineno);
        });
        
        // Ensure CSS is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, checking CSS...');
            const body = document.body;
            const computedStyle = window.getComputedStyle(body);
            console.log('Body background:', computedStyle.background);
            
            // Test if CSS loaded by checking if body has the gradient background
            if (!computedStyle.background.includes('gradient') && !computedStyle.background.includes('linear')) {
                console.warn('CSS may not have loaded properly!');
                // Try to reload CSS
                const cssLink = document.querySelector('link[href="style.css"]');
                if (cssLink) {
                    const newLink = cssLink.cloneNode(true);
                    cssLink.parentNode.replaceChild(newLink, cssLink);
                }
            }
        });
    </script>
    <script src="script.js"></script>
</body>

</html>
